# multi_threads_server
使用c++和libevent来编写一个多线程tcp server小例子

很多人说libevent是不支持多线程的.确实,libevent绝大多数函数都不是线程安全的,所以使用多线程的时候要非常小心.
但并不是就100%不可以用多线程.主要的核心是:每个线程都要配备一个base

下面简要说明一下多线程如何实现.
  1.主线程初始化,开启n个管道,之后主线程和其他线程是通过管道进行通讯
  2.n个线程被启动,开始初始化自己的base,并监听各自的管道
  3.主线程进行bind listen accept的操作,取得对方的套接字
  4.accpet成功后,主线程选择(hash)一个线程,和他通过管道,把fd号告诉那个线程
  5.子线程得到了fd,然后在自己的base上面注册了套接字的read事件.
